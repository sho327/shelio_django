<header class="navbar bg-base-100 shadow-md z-50 sticky top-0">
  
	<div class="flex-none px-4 flex items-center gap-2">
	  <button class="btn btn-ghost lg:hidden" @click="drawerOpen = !drawerOpen">
		<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 24 24" stroke="currentColor" stroke-width="2.5">
		  <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"/>
		</svg>
	  </button>
  
	  <button class="btn btn-ghost hidden lg:flex" @click="sidebarOpen = !sidebarOpen">
		<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
		  <path stroke-linecap="round" stroke-linejoin="round" d="M4 12h16M4 6h16M4 18h10"/>
		</svg>
	  </button>
	</div>
	
	<div class="flex-1">
	  <a href="{% url 'dashboard:dashboard' %}" class="font-bold text-2xl normal-case text-primary">{{ SITE_NAME }}</a>
	</div>
  
	<div class="flex-none gap-2">
		<a href="/liked" class="btn btn-ghost btn-circle btn-sm" title="いいねした作品">
			<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-error" fill="currentColor" viewBox="0 0 24 24">
				<path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
			</svg>
		</a>
		<div class="dropdown dropdown-end">
			<div tabindex="0" role="button" class="btn btn-ghost btn-circle btn-sm">
				<div class="indicator" title="お知らせ">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" />
					</svg>
					<span class="badge badge-xs badge-error indicator-item rounded-full text-white px-1 py-1.5">3</span>
				</div>
			</div>
			<ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-64 z-[1]">
				<li class="menu-title">お知らせ (3)</li>
				<li><a href="/notifications/comment/1">コメントへの返信が来ました</a></li>
				<li><a href="/notifications/like/2">あなたの作品が100いいねを達成</a></li>
				<li><a href="/notifications/new/3">新規プロジェクトが公開されました</a></li>
			</ul>
		</div>
  
	  <div class="relative" x-data="{ open: false }">
		<button @click="open = !open" class="btn btn-ghost rounded-lg flex items-center gap-2">
		  <div class="w-8 h-8 rounded-full overflow-hidden">
			{% if user.is_authenticated and USER_PROFILE %}
			  {% if USER_PROFILE.icon %}
				<img src="{{ USER_PROFILE.icon.url }}" alt="プロフィールアイコン"/>
			  {% else %}
				<div class="w-8 h-8 bg-neutral text-neutral-content rounded-full flex items-center justify-center text-xs font-semibold">
				  {{ USER_PROFILE.display_name|first|upper|default:user.email|first|upper }}
				</div>
			  {% endif %}
			{% else %}
			  <img src="https://placehold.jp/40x40.png" alt="User"/>
			{% endif %}
		  </div>
		  <span class="hidden md:inline">
			{% if user.is_authenticated %}
			  {% if USER_PROFILE and USER_PROFILE.display_name %}
				{{ USER_PROFILE.display_name }}
			  {% else %}
				{{ user.email }}
			  {% endif %}
			{% else %}
			  ゲスト
			{% endif %}
		  </span>
		</button>
		<ul x-cloak x-show="open" @click.outside="open=false" class="absolute top-10 right-0 mt-1 dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52 z-50">
		  <li>
			<a href="{% url 'account:profile' %}"
			   :class="{
				   'focus:bg-neutral focus:text-neutral-content': activeTheme === 'business',
				   'text-base-content hover:bg-primary/10 focus:!bg-primary/10 active:!bg-primary/10 focus-visible:!bg-primary/10 focus:!text-primary active:!text-primary': activeTheme !== 'business'
			   }">
			   プロフィール
			</a>
		  </li>
		  <!-- <li>
			<a :class="{
				   'focus:bg-neutral focus:text-neutral-content': activeTheme === 'business',
				   'text-base-content hover:bg-primary/10 focus:!bg-primary/10 active:!bg-primary/10 focus-visible:!bg-primary/10 focus:!text-primary active:!text-primary': activeTheme !== 'business'
			   }">
			   設定
			</a>
		  </li> -->
		  <li>
			<a :class="{
				   'focus:bg-neutral focus:text-neutral-content': activeTheme === 'business',
				   'text-base-content hover:bg-primary/10 focus:!bg-primary/10 active:!bg-primary/10 focus-visible:!bg-primary/10 focus:!text-primary active:!text-primary': activeTheme !== 'business'
			   }">
			   マイコレクション
			</a>
		  </li>
		  
		  <li class="divider"></li>
		  
		  <li>
			<a href="{% url 'account:logout' %}"
			   :class="{
				   'focus:bg-neutral focus:text-neutral-content': activeTheme === 'business',
				   'text-base-content hover:bg-error/10 focus:!bg-error/10 active:!bg-error/10 focus-visible:!bg-error/10 focus:!text-error active:!text-error': activeTheme !== 'business'
			   }">
			   ログアウト
			</a>
		  </li>
		</ul>
	  </div>
	</div>
  </header>