<aside :class="sidebarOpen ? 'w-64' : 'w-16'" class="bg-base-100 border-r transition-all duration-300 hidden lg:flex flex-col">
  <div class="p-4 flex-1">
    <div x-show="sidebarOpen"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0 translate-x-4"
         x-transition:enter-end="opacity-100 translate-x-0"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100 translate-x-0"
         x-transition:leave-end="opacity-0 translate-x-4">
      <div class="mb-4">
        <div class="text-sm text-base-content/70">開発者名</div>
        <div class="font-semibold">
          {% if user.is_authenticated %}
            {% if USER_PROFILE and USER_PROFILE.display_name %}
              {{ USER_PROFILE.display_name }}
            {% else %}
              {{ user.email }}
            {% endif %}
          {% else %}
            ゲスト
          {% endif %}
        </div>
      </div>
    </div>
    
    <nav class="menu flex-1 menu-compact"> 
      <ul class="flex flex-col gap-1">

        <li x-show="sidebarOpen" 
            class="menu-title py-2 px-4 text-xs font-semibold uppercase text-base-content/50 transition duration-300">
          自身の作品管理
        </li>

        <li>
          <a x-tooltip="ダッシュボード" 
             class="flex items-center gap-2"
             :class="{
                 'active': activePath === 'dashboard', 
                 'justify-center p-0': !sidebarOpen, 
                 'py-3 px-4': sidebarOpen 
             }"
             @click="activePath = 'dashboard'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 12h18M3 6h18M3 18h18"/>
            </svg>
            <span x-show="sidebarOpen"
                  x-transition:enter="transition ease-out duration-300 delay-50"
                  x-transition:enter-start="opacity-0"
                  x-transition:enter-end="opacity-100"
                  x-transition:leave="transition ease-in duration-100">
              ダッシュボード
            </span>
          </a>
        </li>
        
        <li>
          <a x-tooltip="新規投稿"
             class="flex items-center gap-2"
             :class="{
                 'active': activePath === 'post', 
                 'justify-center p-0': !sidebarOpen, 
                 'py-3 px-4': sidebarOpen 
             }"
             @click="activePath = 'post'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
            </svg>
            <span x-show="sidebarOpen"
                  x-transition:enter="transition ease-out duration-300 delay-50"
                  x-transition:enter-start="opacity-0"
                  x-transition:enter-end="opacity-100"
                  x-transition:leave="transition ease-in duration-100">
              新規投稿
            </span>
          </a>
        </li>

        <li>
          <a x-tooltip="自分の作品"
             class="flex items-center gap-2"
             :class="{
                 'active': activePath === 'my_projects', 
                 'justify-center p-0': !sidebarOpen, 
                 'py-3 px-4': sidebarOpen 
             }"
             @click="activePath = 'my_projects'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9.75 17L9 20l-1 1h8l-1-1-0.75-3M3 8h18M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2zm11-6a2 2 0 100-4 2 2 0 000 4z" />
            </svg>
            <span x-show="sidebarOpen"
                  x-transition:enter="transition ease-out duration-300 delay-50"
                  x-transition:enter-start="opacity-0"
                  x-transition:enter-end="opacity-100"
                  x-transition:leave="transition ease-in duration-100">
              投稿作品一覧
            </span>
          </a>
        </li>
        
        <li class="divider my-2"></li>

        <li x-show="sidebarOpen" 
            class="menu-title py-2 px-4 text-xs font-semibold uppercase text-base-content/50 transition duration-300">
          アカウント
        </li>
        
        <li>
          <a x-tooltip="設定"
             class="flex items-center gap-2"
             :class="{
                 'active': activePath === 'settings', 
                 'justify-center p-0': !sidebarOpen, 
                 'py-3 px-4': sidebarOpen 
             }"
             @click="activePath = 'settings'">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3"/>
            </svg>
            <span x-show="sidebarOpen"
                  x-transition:enter="transition ease-out duration-300 delay-50"
                  x-transition:enter-start="opacity-0"
                  x-transition:enter-end="opacity-100"
                  x-transition:leave="transition ease-in duration-100">
              アカウント設定
            </span>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</aside>

<div class="lg:hidden">
  <div x-show="drawerOpen" class="fixed inset-0 z-40 flex">
    <div class="fixed inset-0 bg-base-300/60" @click="drawerOpen = false"></div>
    <aside class="bg-base-100 w-64 p-4 shadow-lg z-50 pt-20 h-full">
      <div class="flex items-center justify-between mb-4">
        <div>
          <div class="text-sm text-base-content/70">開発者名</div>
          <div class="font-semibold">
            {% if user.is_authenticated %}
              {% if USER_PROFILE and USER_PROFILE.display_name %}
                {{ USER_PROFILE.display_name }}
              {% else %}
                {{ user.email }}
              {% endif %}
            {% else %}
              ゲスト
            {% endif %}
          </div>
        </div>
        <button class="btn btn-ghost" @click="drawerOpen = false">閉じる</button>
      </div>
      <nav class="menu">
        <ul>
          <li class="menu-title">自身の作品管理</li>
          <li><a @click="drawerOpen=false">ダッシュボード</a></li>
          <li><a @click="drawerOpen=false">新規投稿</a></li>
          <li><a @click="drawerOpen=false">投稿作品一覧</a></li>
          <li class="menu-title">アカウント</li>
          <li><a @click="drawerOpen=false">設定</a></li>
        </ul>
      </nav>
    </aside>
  </div>
</div>