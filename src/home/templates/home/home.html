{% extends "core/base.html" %}

{% block title %}マイ・ダッシュボード - YourApp{% endblock %}

{% block content %}
<div class="mb-6 flex items-center justify-between">
  <h1 class="text-2xl font-bold">マイ・ダッシュボード</h1>
  <button class="btn btn-primary btn-sm md:btn-md" @click="activePath = 'post'">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5">
      <path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" />
    </svg>
    新規プロジェクト投稿
  </button>
</div>

<h2 class="text-xl font-semibold mb-3">作品サマリー</h2>
<div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
  
  <div class="stats shadow bg-base-100 p-4">
    <div class="stat">
      <div class="stat-figure text-primary">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
      </div>
      <div class="stat-title">総投稿プロジェクト数</div>
      <div class="stat-value text-primary" x-text="projects.length"></div>
      <div class="stat-desc" x-text="projects.filter(p => p.status === 'Public').length + '件が公開中'"></div>
    </div>
  </div>
  
  <div class="stats shadow bg-base-100 p-4">
    <div class="stat">
      <div class="stat-figure text-secondary">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg>
      </div>
      <div class="stat-title">累計ビュー数</div>
      <div class="stat-value text-secondary" x-text="projects.reduce((sum, p) => sum + p.views, 0).toLocaleString()"></div>
      <div class="stat-desc">公開作品全体へのアクセス</div>
    </div>
  </div>
  
  <div class="stats shadow bg-base-100 p-4">
    <div class="stat">
      <div class="stat-figure text-accent">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path></svg>
      </div>
      <div class="stat-title">合計獲得いいね数</div>
      <div class="stat-value text-accent" x-text="projects.reduce((sum, p) => sum + p.likes, 0)"></div>
      <div class="stat-desc">他のユーザーからの評価</div>
    </div>
  </div>
</div>

<h2 class="text-xl font-semibold mb-3">投稿作品一覧 (自分の管理画面)</h2>
<div class="overflow-x-auto bg-base-100 rounded-lg shadow-xl">
  <table class="table w-full">
    <thead>
      <tr>
        <th>プロジェクト名</th>
        <th>技術スタック</th>
        <th>公開状態</th>
        <th>いいね/ビュー</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      <template x-for="project in projects" :key="project.id">
        <tr class="hover:bg-base-200">
          <td class="font-semibold" x-text="project.title"></td>
          <td class="text-sm text-base-content/70" x-text="project.language"></td>
          <td>
            <div class="badge" 
                 :class="project.status === 'Public' ? 'badge-success' : 'badge-neutral'">
              <span x-text="project.status === 'Public' ? '公開中' : '非公開'"></span>
            </div>
          </td>
          <td class="text-sm">
            <span x-text="project.likes"></span> いいね / <span x-text="project.views.toLocaleString()"></span> ビュー
          </td>
          <td>
            <div class="dropdown dropdown-left">
              <div tabindex="0" role="button" class="btn btn-ghost btn-sm">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z"></path></svg>
              </div>
              <ul tabindex="0" class="dropdown-content z-[1] menu p-2 shadow bg-base-300 rounded-box w-32">
                <li><a href="#">詳細を見る</a></li>
                <li><a href="#">編集</a></li>
                <li><a href="#">公開/非公開切替</a></li>
                <li><a href="#">削除</a></li>
              </ul>
            </div>
          </td>
        </tr>
      </template>
      <template x-if="projects.length === 0">
        <tr>
          <td colspan="5" class="text-center text-base-content/70 py-6">
            まだプロジェクトがありません。早速、最初の制作物を投稿しましょう！
          </td>
        </tr>
      </template>
    </tbody>
  </table>
</div>
{% endblock content %}